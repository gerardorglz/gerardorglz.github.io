<!-- _includes/galeria_header.html -->
<section class="galeria-header">
  {% comment %}
    Sacamos la lista única de nombres desde _data/galeria.yml
  {% endcomment %}
  {% assign nombres = site.data.galeria | map: "name" | uniq %}

  <div class="galeria-header__inner">
    <h1 class="galeria-header__title">Galería</h1>

    <nav class="galeria-filtros" aria-label="Filtros de galería">
      <button class="galeria-filtro is-active" data-filter="all" type="button">Todos</button>
      {% for n in nombres %}
        <button class="galeria-filtro" data-filter="{{ n | downcase }}" type="button">{{ n }}</button>
      {% endfor %}
    </nav>

    <div id="galeria-grid" class="galeria-grid" role="list">
      {% for item in site.data.galeria %}
        <figure class="galeria-item" role="listitem" data-name="{{ item.name | downcase }}">
          <img src="{{ item.src | relative_url }}" alt="{{ item.alt | escape }}">
          <figcaption class="galeria-caption">{{ item.name }}</figcaption>
        </figure>
      {% endfor %}
    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const buttons = document.querySelectorAll('.galeria-filtro');
  const items = document.querySelectorAll('#galeria-grid .galeria-item');
  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      const f = btn.dataset.filter;
      buttons.forEach(b => b.classList.remove('is-active'));
      btn.classList.add('is-active');
      items.forEach(el => {
        el.style.display = (f === 'all' || el.dataset.name === f) ? '' : 'none';
      });
    });
  });
});
</script>
